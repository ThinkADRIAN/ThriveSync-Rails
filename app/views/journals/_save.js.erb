<% flash.each do |type, message| %>
  $('#flash_messages').html("<%= escape_javascript(render :partial => 'shared/flash_notices' , :locals => { :flash => flash }) %>" ).slideDown(500).delay(3000).slideUp(500)
<% end %>

$("ul.errors").html("");
<% if @journal.errors.any? %>
  <% @journal.errors.full_messages.each do |message| %>
    $("ul.errors").append($("<li />").html("<%= message.html_safe %>"));
  <% end %>
<% else %>
<% if current_page?(:controller => 'journals', :action => 'index') %>
    $(".journal-index").html("<%= escape_javascript(render 'index') %>");
  <% else %>
    $(".shared-index").html("<%= escape_javascript(render 'shared/index') %>");
  <% end %>
  $("#journal-modal").modal("hide");
<% end %>