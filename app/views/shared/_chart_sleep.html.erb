<% if @user == nil %>
  <% user = current_user %>
<% else %>
  <% user = @user%>
<% end %>

<% @sleeps = Sleep.where(user_id: user.id) %>

<div class="col-md-12">
    <%= line_chart [
    {name: "Sleep Time", data: @sleeps.group_by_day(:created_at, last: @sleep_lookback_period).average(:time)}
    ], colors: [ SLEEP_PRIMARY_COLOR ],
    library: {
        title: "Sleep Quantity",
        titlePosition: 'out',
        titleTextStyle: {
            color: SLEEP_PRIMARY_COLOR
        },
        backgroundColor: {
            fill: SLEEP_BACKGROUND_COLOR,
            stroke: SLEEP_PRIMARY_COLOR,
            strokeWidth: SLEEP_STROKE_WIDTH
        },
        animation: {
            duration: SLEEP_ANIMATION_DURATION,
            startup: true,
            easing: SLEEP_ANIMATION_EASING
        },
        hAxis: {
            textStyle: {
                color: SLEEP_PRIMARY_COLOR
            },
            gridlines: {
                color: SLEEP_BACKGROUND_COLOR
            }
        },
        legend: {
            textStyle: {
                color: SLEEP_PRIMARY_COLOR
            },
            position: SLEEP_LEGEND_POSITION
        },
        vAxis: {
            textStyle: {
                color: SLEEP_PRIMARY_COLOR
            },
            gridlines: {
                color: SLEEP_BACKGROUND_COLOR
            }
        }
    } %>
</div>

<div class="col-md-12">
  <%= line_chart [
  {name: "Quality", data: @sleeps.group_by_day(:created_at, last: @sleep_lookback_period).average(:quality)}
  ], colors: [ SLEEP_PRIMARY_COLOR ],
  library: {
      title: "Sleep Quality",
      titlePosition: 'out',
      titleTextStyle: {
              color: SLEEP_PRIMARY_COLOR
      },
      backgroundColor: {
          fill: SLEEP_BACKGROUND_COLOR,
          stroke: SLEEP_PRIMARY_COLOR,
          strokeWidth: SLEEP_STROKE_WIDTH
      },
      animation: {
          duration: SLEEP_ANIMATION_DURATION,
          startup: true,
          easing: SLEEP_ANIMATION_EASING
      },
      hAxis: {
          textStyle: {
              color: SLEEP_PRIMARY_COLOR
          },
          gridlines: {
              color: SLEEP_BACKGROUND_COLOR
          }
      },
      legend: {
          textStyle: {
              color: SLEEP_PRIMARY_COLOR
          },
          position: SLEEP_LEGEND_POSITION
      },
      vAxis: {
          ticks: [{v:1, f:'Broken'}, {v:2, f:'Light'}, {v:3, f:'Norm'}, {v:4, f:'Deep'}],
          textStyle: {
              color: SLEEP_PRIMARY_COLOR
          },
          gridlines: {
              color: SLEEP_BACKGROUND_COLOR
          }
      }
  } %>
</div>