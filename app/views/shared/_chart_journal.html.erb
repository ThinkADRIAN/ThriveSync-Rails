<% if @user == nil %>
  <% user = current_user %>
<% else %>
  <% user = @user%>
<% end %>

<% @journals = Journal.where(user_id: user.id) %>

<%= line_chart [
  {name: "Journal", data: @journals.group_by_day(:created_at, last: 7).count(:journal_entry)}
  ], colors: [JOURNAL_PRIMARY_COLOR],
  library: {
      title: "Journal",
      titlePosition: 'out',
      titleTextStyle: {
        color: JOURNAL_PRIMARY_COLOR
      },
      backgroundColor: {
        fill: JOURNAL_BACKGROUND_COLOR,
        stroke: JOURNAL_PRIMARY_COLOR,
        strokeWidth: JOURNAL_STROKE_WIDTH
      },
      animation: {
        duration: 1000,
        startup: true,
        easing: JOURNAL_ANIMATION_EASING
      },
      hAxis: {
        textStyle: {
          color: JOURNAL_PRIMARY_COLOR
        },
        gridlines: {
          color: JOURNAL_BACKGROUND_COLOR
        }
      },
      legend: {
        textStyle: {
          color: JOURNAL_BACKGROUND_COLOR
        },
        position: JOURNAL_LEGEND_POSITION
      },
      vAxis: {
        ticks: [{v:0, f:'No'}, {v:1, f:'Yes'}],
        textStyle: {
          color: JOURNAL_PRIMARY_COLOR
        },
        gridlines: {
          color: JOURNAL_BACKGROUND_COLOR
        }
      }
  }
%>